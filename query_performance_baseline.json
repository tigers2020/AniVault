{
  "analysis_timestamp": "2025-09-20 22:06:11",
  "database_stats": {
    "table_stats": {
      "anime_metadata_count": 100,
      "parsed_files_count": 1000
    },
    "current_indexes": [
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_first_air_date",
        "definition": "CREATE INDEX idx_anime_metadata_first_air_date ON anime_metadata (first_air_date)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_korean_title",
        "definition": "CREATE INDEX idx_anime_metadata_korean_title ON anime_metadata (korean_title)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_status",
        "definition": "CREATE INDEX idx_anime_metadata_status ON anime_metadata (status)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_title",
        "definition": "CREATE INDEX idx_anime_metadata_title ON anime_metadata (title)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_updated_at",
        "definition": "CREATE INDEX idx_anime_metadata_updated_at\nON anime_metadata (updated_at)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_updated_at_version",
        "definition": "CREATE INDEX idx_anime_metadata_updated_at_version\nON anime_metadata (updated_at, version)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_version",
        "definition": "CREATE INDEX idx_anime_metadata_version ON anime_metadata (version)"
      },
      {
        "table": "anime_metadata",
        "index": "idx_anime_metadata_vote_average",
        "definition": "CREATE INDEX idx_anime_metadata_vote_average ON anime_metadata (vote_average)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_first_air_date",
        "definition": "CREATE INDEX ix_anime_metadata_first_air_date ON anime_metadata (first_air_date)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_korean_title",
        "definition": "CREATE INDEX ix_anime_metadata_korean_title ON anime_metadata (korean_title)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_original_title",
        "definition": "CREATE INDEX ix_anime_metadata_original_title ON anime_metadata (original_title)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_popularity",
        "definition": "CREATE INDEX ix_anime_metadata_popularity ON anime_metadata (popularity)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_status",
        "definition": "CREATE INDEX ix_anime_metadata_status ON anime_metadata (status)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_title",
        "definition": "CREATE INDEX ix_anime_metadata_title ON anime_metadata (title)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_version",
        "definition": "CREATE INDEX ix_anime_metadata_version ON anime_metadata (version)"
      },
      {
        "table": "anime_metadata",
        "index": "ix_anime_metadata_vote_average",
        "definition": "CREATE INDEX ix_anime_metadata_vote_average ON anime_metadata (vote_average)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_db_updated_at",
        "definition": "CREATE INDEX idx_parsed_files_db_updated_at\nON parsed_files (db_updated_at)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_db_updated_at_version",
        "definition": "CREATE INDEX idx_parsed_files_db_updated_at_version\nON parsed_files (db_updated_at, version)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_file_path",
        "definition": "CREATE INDEX idx_parsed_files_file_path ON parsed_files (file_path)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_is_processed",
        "definition": "CREATE INDEX idx_parsed_files_is_processed ON parsed_files (is_processed)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_metadata_id",
        "definition": "CREATE INDEX idx_parsed_files_metadata_id ON parsed_files (metadata_id)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_parsed_title",
        "definition": "CREATE INDEX idx_parsed_files_parsed_title ON parsed_files (parsed_title)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_release_group",
        "definition": "CREATE INDEX idx_parsed_files_release_group ON parsed_files (release_group)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_resolution",
        "definition": "CREATE INDEX idx_parsed_files_resolution ON parsed_files (resolution)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_season_episode",
        "definition": "CREATE INDEX idx_parsed_files_season_episode ON parsed_files (season, episode)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_version",
        "definition": "CREATE INDEX idx_parsed_files_version ON parsed_files (version)"
      },
      {
        "table": "parsed_files",
        "index": "idx_parsed_files_year",
        "definition": "CREATE INDEX idx_parsed_files_year ON parsed_files (year)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_episode",
        "definition": "CREATE INDEX ix_parsed_files_episode ON parsed_files (episode)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_file_extension",
        "definition": "CREATE INDEX ix_parsed_files_file_extension ON parsed_files (file_extension)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_file_hash",
        "definition": "CREATE INDEX ix_parsed_files_file_hash ON parsed_files (file_hash)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_file_path",
        "definition": "CREATE UNIQUE INDEX ix_parsed_files_file_path ON parsed_files (file_path)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_filename",
        "definition": "CREATE INDEX ix_parsed_files_filename ON parsed_files (filename)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_is_processed",
        "definition": "CREATE INDEX ix_parsed_files_is_processed ON parsed_files (is_processed)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_metadata_id",
        "definition": "CREATE INDEX ix_parsed_files_metadata_id ON parsed_files (metadata_id)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_parsed_title",
        "definition": "CREATE INDEX ix_parsed_files_parsed_title ON parsed_files (parsed_title)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_release_group",
        "definition": "CREATE INDEX ix_parsed_files_release_group ON parsed_files (release_group)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_resolution",
        "definition": "CREATE INDEX ix_parsed_files_resolution ON parsed_files (resolution)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_season",
        "definition": "CREATE INDEX ix_parsed_files_season ON parsed_files (season)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_version",
        "definition": "CREATE INDEX ix_parsed_files_version ON parsed_files (version)"
      },
      {
        "table": "parsed_files",
        "index": "ix_parsed_files_year",
        "definition": "CREATE INDEX ix_parsed_files_year ON parsed_files (year)"
      }
    ]
  },
  "tmdb_id_queries": {
    "single_lookup": {
      "queries_executed": 10,
      "total_time_ms": 5.751371383666992,
      "avg_time_per_query_ms": 0.5751371383666992,
      "sample_tmdb_ids": [
        1,
        2,
        3,
        4,
        5
      ]
    },
    "bulk_lookup": {
      "queries_executed": 20,
      "total_time_ms": 8.343219757080078,
      "avg_time_per_query_ms": 0.4171609878540039,
      "sample_tmdb_ids": [
        1,
        2,
        3,
        4,
        5
      ]
    },
    "bulk_in_operation": {
      "queries_executed": 1,
      "records_queried": 50,
      "total_time_ms": 2.1660327911376953,
      "avg_time_per_record_ms": 0.043320655822753906,
      "sample_tmdb_ids": [
        1,
        2,
        3,
        4,
        5
      ]
    }
  },
  "file_path_queries": {
    "single_lookup": {
      "queries_executed": 10,
      "total_time_ms": 5.092620849609375,
      "avg_time_per_query_ms": 0.5092620849609375,
      "sample_file_paths": [
        "/test/path/anime_1/episode_01.mkv",
        "/test/path/anime_1/episode_02.mkv",
        "/test/path/anime_1/episode_03.mkv"
      ]
    },
    "bulk_lookup": {
      "queries_executed": 20,
      "total_time_ms": 7.9784393310546875,
      "avg_time_per_query_ms": 0.3989219665527344,
      "sample_file_paths": [
        "/test/path/anime_1/episode_01.mkv",
        "/test/path/anime_1/episode_02.mkv",
        "/test/path/anime_1/episode_03.mkv"
      ]
    },
    "bulk_in_operation": {
      "queries_executed": 1,
      "records_queried": 50,
      "total_time_ms": 2.1538734436035156,
      "avg_time_per_record_ms": 0.04307746887207031,
      "sample_file_paths": [
        "/test/path/anime_1/episode_01.mkv",
        "/test/path/anime_1/episode_02.mkv",
        "/test/path/anime_1/episode_03.mkv"
      ]
    }
  },
  "updated_at_queries": {
    "order_by_updated_at": {
      "queries_executed": 1,
      "records_queried": 100,
      "total_time_ms": 2.7573108673095703,
      "avg_time_per_record_ms": 0.027573108673095703
    },
    "filter_by_updated_at": {
      "queries_executed": 1,
      "filter_timestamp": "2025-09-21T01:58:51.831101",
      "total_time_ms": 1.0089874267578125
    },
    "incremental_sync_pattern": {
      "queries_executed": 1,
      "records_queried": 50,
      "total_time_ms": 1.7807483673095703,
      "avg_time_per_record_ms": 0.035614967346191406
    }
  },
  "db_updated_at_queries": {
    "order_by_db_updated_at": {
      "queries_executed": 1,
      "records_queried": 100,
      "total_time_ms": 2.7964115142822266,
      "avg_time_per_record_ms": 0.027964115142822266
    },
    "filter_by_db_updated_at": {
      "queries_executed": 1,
      "filter_timestamp": "2025-09-21T01:58:52.097219",
      "total_time_ms": 1.6472339630126953
    },
    "incremental_sync_pattern": {
      "queries_executed": 1,
      "records_queried": 50,
      "total_time_ms": 2.4144649505615234,
      "avg_time_per_record_ms": 0.04828929901123047
    }
  },
  "explain_analyze_results": {
    "tmdb_id_lookup": {
      "query": "EXPLAIN QUERY PLAN \n                    SELECT * FROM anime_metadata \n                    WHERE tmdb_id = 1",
      "explain_result": [
        2
      ]
    },
    "file_path_lookup": {
      "query": "EXPLAIN QUERY PLAN \n                    SELECT * FROM parsed_files \n                    WHERE file_path = 'test_path.mkv'",
      "explain_result": [
        3
      ]
    },
    "updated_at_order": {
      "query": "EXPLAIN QUERY PLAN \n                    SELECT * FROM anime_metadata \n                    ORDER BY updated_at \n                    LIMIT 10",
      "explain_result": [
        5
      ]
    },
    "db_updated_at_order": {
      "query": "EXPLAIN QUERY PLAN \n                    SELECT * FROM parsed_files \n                    ORDER BY db_updated_at \n                    LIMIT 10",
      "explain_result": [
        5
      ]
    }
  },
  "analysis_duration_seconds": 0.08563685417175293
}
