# 🎯 AniVault 기획 프로토콜 (Executable Prompts)

**Version**: v5.0  
**Status**: Production  
**Last-Updated**: 2025-10-13  
**Based-On**: v5.0 개선 계획 (8인 승인 완료)

---

## 🎯 목표 (GOAL)

PLANNING_PROTOCOL.md의 **실전 사용성 강화** 및 **완성도 향상**

### 핵심 목표
1. **실전 시나리오 추가**: 복잡도별 3가지 시나리오
2. **설계 비교 강화**: 정량적 Tradeoff 평가 템플릿
3. **완료 기준 명확화**: Done-When 필드 추가
4. **사용성 개선**: Quick Start, 진행 상태 시각화

---

## 🚫 비목표 (NON-GOALS)

- ❌ DEVELOPMENT_PROTOCOL.md 변경 (별도 계획 필요)
- ❌ 프로토콜 구조 대폭 변경 (Phase 1-5 유지)
- ❌ 완전히 새로운 문서 작성 (기존 v4.1 기반 개선)

---

## 📊 제약사항 (CONSTRAINTS)

- **문서 길이**: 최대 350줄 (현재 220줄 → +130줄 이내)
- **호환성**: v4.1 사용자가 v5.0으로 쉽게 전환
- **유지보수**: 압축 모드 유지, 복잡도 증가 최소화
- **테스트**: 3개 실제 기획으로 검증 필수

---

## 👥 대상 사용자 (TARGET-USER)

1. **초보자**: 처음 프로토콜 사용하는 개발자
2. **기존 사용자**: v4.1 사용 중인 팀원
3. **AI Assistant**: 프롬프트 실행하는 AI

---

## ✅ 성공 기준 (SUCCESS-CRITERIA)

1. **사용성**: 초보자가 10분 내 첫 번째 기획 시작 가능
2. **완성도**: 3개 실전 기획으로 검증 완료
3. **명확성**: Done-When 필드로 완료 기준 100% 명확화

---

## 📋 Phase별 산출물

### Phase 1: 요구사항 분석 ✅

#### Evidence Log

| Source | Pointer | Summary | Implication |
|--------|---------|---------|-------------|
| Protocol | PLANNING_PROTOCOL.md:1-228 | v4.1, 220줄 (압축됨) | ✅ 이미 압축 완료 |
| Usage | docs/* | 10개 파일에서 참조 | 🔄 실제 사용 중 |
| Guide | PROTOCOL_GUIDE.md:1-131 | 130줄, v2.1 | ✅ 가이드 존재 |
| Personas | personas.mdc | 8인 상세 프로필 | ✅ 체계적 |
| Review | REVIEW_PROTOCOL.md | v1.0, 418줄 | ⚠️ 기획보다 2배 길음 |

#### 페르소나 의견 요약

**[윤도현/CLI]**: 섹션 2 예시가 너무 간단. 복잡한 케이스 필요.  
**[사토미나/Algo]**: Phase 2 설계 비교 기준 부족. 정량화 필요.  
**[김지유/Data]**: WBS Done-When 컬럼 누락. 완료 기준 모호.  
**[리나/UX]**: 원샷 프롬프트 54줄로 너무 김. 진행 상태 시각화 없음.

---

### Phase 2: 설계 ✅

#### Tradeoff Table (개선 방향)

| Option | 장점 | 단점 | 복잡도 | 우선순위 | 선호 |
|--------|------|------|--------|---------|------|
| **A: 실전 시나리오 추가** | 사용자 가이드 강화 | 문서 길어짐 (+100줄) | Low | High | ✅ |
| **B: 대화 패턴 라이브러리** | 다양한 예시 | 유지보수 부담 | Med | Med | ⚠️ |
| **C: 인터랙티브 체크리스트** | 단계별 확인 | 구현 복잡 | High | Low | ❌ |

**결정**: A안 우선 추진, B안 점진적 추가

#### 설계 상세

##### 1. 실전 시나리오 3종 (A안)

```markdown
## 6) 실전 시나리오

### 시나리오 A: 간단한 기능 추가 (1-2 Phase)
- 대상: CLI 옵션 추가, 단순 유틸리티
- 소요: 20-30분
- Phase: 1-2만 진행

### 시나리오 B: 중간 복잡도 기능 (3-4 Phase)
- 대상: 서비스 로직, 데이터 구조 변경
- 소요: 40-50분
- Phase: 1-4 진행 (위험 분석 포함)

### 시나리오 C: 복잡한 아키텍처 변경 (전체 5 Phase)
- 대상: 파이프라인 리팩토링, 새 모듈 추가
- 소요: 60-75분
- Phase: 1-5 전체 진행
```

##### 2. Tradeoff 평가 템플릿 (정량화)

```markdown
### Phase 2 전용: 설계 비교 템플릿

| 기준 | Option A | Option B | 가중치 | 점수 A | 점수 B |
|------|----------|----------|--------|--------|--------|
| 성능 | O(n) | O(n log n) | 40% | 40 | 32 |
| 유지보수 | 복잡 (7줄) | 단순 (3줄) | 30% | 15 | 30 |
| 확장성 | 제한적 | 유연 | 30% | 12 | 30 |
| **총점** | | | 100% | **67** | **92** ✅ |

**선택 근거**: Option B가 총점 92점으로 우세
```

##### 3. Done-When 필드 추가 (WBS v2.0)

```markdown
### Mini WBS v2.0

| ID | Task | Owner | Done-When | Test | Dependencies | ETA |
|----|------|-------|-----------|------|--------------|-----|
| 1 | CLI 명령어 | 윤도현 | ruff=0e, --help 표시 | pytest 3개 pass | - | 1d |
| 2 | 서비스 메서드 | 김지유 | mypy=0e, 7일+ 삭제 | 경계값 테스트 | - | 1d |
| 3 | 확인 프롬프트 | 리나 | Y/N 입력 정상 | UX 테스트 | - | 0.5d |

Done-When 예시:
- "ruff=0e, mypy=0e, pytest 10/10 pass"
- "DB 마이그레이션 + 롤백 스크립트 테스트"
- "API 문서 업데이트 + 코드 예시 3개"
```

##### 4. 사용성 개선 (UX)

```markdown
## 🚀 1분 Quick Start (최상단 추가)

**처음 사용하시나요?**
1. ⬇️ 섹션 1 "원샷 프롬프트" 복사
2. ✏️ <GOAL>, <CONSTRAINTS> 채우기
3. ▶️ AI에게 붙여넣기
4. 🎭 대화 시작!

---

## 진행 상태 체크리스트

[ ] Phase 1: 요구사항 분석 ✅
[ ] Phase 2: 설계 비교 ⏳
[ ] Phase 3: 위험 분석
[ ] Phase 4: 작업 분해 (WBS)
[ ] Phase 5: 최종 승인

현재: [●●●○○] Phase 3/5
```

##### 5. 대화 패턴 DO/DON'T 확대

```markdown
## 🎭 대화 스타일 가이드 (15개 예시)

### ❌ DON'T (템플릿 금지)
1. "[윤도현] 분석(≤6줄): - CLI: ..."
2. "[사토미나] 검토 완료. 다음: ..."
3. "[김지유] 데이터 구조: 1. 2. 3."
4. "[리나] UX 체크리스트: □ □ □"
5. "[박우석] 빌드 문제 없음."

### ✅ DO (자연스러운 대화)
1. "[윤도현] 재미있겠는데? 내 생각엔..."
2. "[사토미나] 잠깐, 이 알고리즘은..."
3. "[김지유] 음... 데이터 일관성 문제가..."
4. "[리나] 사용자 입장에서 보면..."
5. "[박우석] 배포할 때 걱정되는 게..."
6. "[최로건] 테스트는 이렇게 해야..."
7. "[니아] 보안 관점에서 위험해 보여..."
8. "[정하림] 라이선스 확인 필요할 것 같은데..."
9. "[윤도현] 동의해. 근데 하나 더 추가하면..."
10. "[사토미나] 좋은데, 성능은 괜찮을까?"
```

---

### Phase 3: 위험 분석 ✅

#### Risks & Mitigations

| Risk | Mitigation | Owner | 우선순위 |
|------|------------|-------|---------|
| 문서 길이 증가 (+130줄) | 접기 기능, 압축 모드 유지 | 윤도현 | Low |
| 기존 사용자 혼란 | v5.0 마이그레이션 가이드 | 리나 | Med |
| 버전 불일치 (가이드) | PROTOCOL_GUIDE.md 동기화 | 김지유 | High |
| 테스트 부족 | 3개 실전 기획으로 검증 | 최로건 | High |
| 절대 경로 노출 | 예시에서 상대 경로 사용 | 니아 | Med |
| 외부 인용 출처 누락 | 출처 명시 체크리스트 | 정하림 | Low |

#### 페르소나별 평가

**[박우석/Build]**: v5.0 메이저 업데이트 권장. Breaking changes 문서화.  
**[최로건/QA]**: 3개 실제 기획으로 테스트 필수. 초보자 사용성 테스트.  
**[니아/Security]**: MCP 도구 예시에서 경로/키 노출 주의.  
**[정하림/License]**: 라이선스 영향 없음. 외부 인용 시 출처 명시.

---

### Phase 4: 작업 분해 ✅

#### Mini WBS v2.0

| ID | Task | Owner | Done-When | Test | Dependencies | ETA |
|----|------|-------|-----------|------|--------------|-----|
| 1 | 실전 시나리오 3종 추가 | 윤도현 | 시나리오 A/B/C 완성 + 예시 | 각 시나리오로 실제 기획 1회 | - | 2d |
| 2 | Tradeoff 평가 템플릿 | 사토미나 | 정량 평가 표 + 가중치 | 예시 3개 작성 | - | 1d |
| 3 | Done-When 필드 추가 | 김지유 | WBS v2.0 표 완성 | 예시 5개 | - | 0.5d |
| 4 | Quick Start 섹션 | 리나 | 1분 시작 가이드 완성 | 초보자 테스트 1명 | - | 1d |
| 5 | 대화 패턴 확대 | 리나 | DO/DON'T 15개 완성 | 다양한 예시 검증 | - | 1.5d |
| 6 | 진행 상태 체크리스트 | 리나 | Phase 진척도 표시 | 시각화 확인 | - | 0.5d |
| 7 | 버전 업데이트 v5.0 | 박우석 | 버전 표기 + 변경사항 문서 | PROTOCOL_GUIDE 동기화 | 1-6 | 0.5d |
| 8 | 실전 테스트 3종 | 최로건 | 3개 기획 완료 | 품질 게이트 통과 | 1-7 | 2d |
| 9 | 마이그레이션 가이드 | 리나 | v4.1→v5.0 전환 문서 | 기존 사용자 테스트 | 7 | 0.5d |

**총 소요 시간**: 10일 (순차)  
**병렬 작업 시**: 5.5일 (1-6 병렬, 7-9 순차)

---

### Phase 5: 최종 승인 ✅

#### Consensus Table

| 페르소나 | 평가 | 주요 이슈 | 조건 | 승인 |
|---------|------|-----------|------|------|
| 윤도현 | 찬성 | 실전 시나리오 필수 | 3개 시나리오 추가 | ✅ |
| 사토미나 | 찬성 | 정량 평가 템플릿 | Tradeoff 강화 | ✅ |
| 김지유 | 찬성 | Done-When 필드 | WBS v2.0 | ✅ |
| 리나 | 찬성 | 사용성 최우선 | Quick Start | ✅ |
| 박우석 | 찬성 | 버전 관리 명확화 | v5.0 + 마이그레이션 | ✅ |
| 최로건 | 찬성 | 실전 테스트 필수 | 3개 기획 검증 | ✅ |
| 니아 | 찬성 | 보안 검토 완료 | 경로/키 예시 확인 | ✅ |
| 정하림 | 찬성 | 라이선스 문제 없음 | 출처 명시 | ✅ |

**최종 승인**: ✅ 전원 승인 (8/8)

---

## 📦 최종 산출물

### 1. PRD-lite (요약)

**목표**: PLANNING_PROTOCOL.md v5.0 출시로 실전 사용성 50% 향상

**핵심 기능**:
1. 실전 시나리오 3종 (간단/중간/복잡)
2. 정량적 Tradeoff 평가 템플릿
3. Done-When 필드 (WBS v2.0)
4. Quick Start (1분 시작)
5. 대화 패턴 확대 (15개 예시)

**측정 지표**:
- 초보자 시작 시간: 10분 이내
- 완료 기준 명확도: 100%
- 실전 테스트: 3개 기획 성공

---

### 2. 변경 요약

| 구분 | v4.1 | v5.0 | 변화 |
|-----|------|------|------|
| **총 줄 수** | 220줄 | 350줄 | +130줄 |
| **섹션 수** | 5개 | 7개 | +2개 |
| **시나리오** | 1개 | 4개 | +3개 |
| **대화 예시** | 2개 | 15개 | +13개 |
| **테이블** | 5종 | 6종 | +1종 |

**주요 추가**:
- ✨ Quick Start (1분)
- ✨ 실전 시나리오 3종
- ✨ Tradeoff 정량 평가
- ✨ Done-When 필드
- ✨ 진행 상태 바

---

### 3. 마이그레이션 가이드 (v4.1 → v5.0)

#### 호환성

**100% 호환**: 기존 v4.1 프롬프트 그대로 사용 가능

**권장 업데이트**:
1. WBS에 Done-When 컬럼 추가
2. Tradeoff 표에 정량 평가 추가
3. Quick Start로 빠른 시작

#### 마이그레이션 체크리스트

```markdown
[ ] PROTOCOL_GUIDE.md 버전 v2.1 → v2.5 업데이트
[ ] 기존 기획 문서에 Done-When 소급 적용
[ ] 팀원에게 v5.0 변경사항 공유
[ ] 3개 기획으로 v5.0 검증
```

---

## 🎯 다음 단계

### 즉시 실행 (이번 주)
1. ✅ Task 1: 실전 시나리오 3종 작성
2. ✅ Task 4: Quick Start 섹션 작성

### 1주차
1. Task 2: Tradeoff 템플릿 작성
2. Task 3: Done-When 필드 추가
3. Task 5-6: 대화 패턴 + 진행 상태

### 2주차
1. Task 7: 버전 v5.0 업데이트
2. Task 8: 실전 테스트 3종
3. Task 9: 마이그레이션 가이드

---

## 📊 품질 게이트

### QUALITY-CHECK
- [x] MCP 증거 2건+ (grep, read_file, codebase_search)
- [x] Phase 대화 로그 5세트
- [x] 요구사항/설계/위험/WBS 완성
- [ ] 실전 테스트 3건 (구현 후)

### ANIVAULT-CHECK
- [x] 문서화 표준 준수
- [x] 버전 관리 명확화
- [x] 마이그레이션 경로 제공

---

## 📝 참고 자료

- **현재 버전**: [PLANNING_PROTOCOL.md v4.1](./PLANNING_PROTOCOL.md)
- **가이드**: [PROTOCOL_GUIDE.md v2.1](./PROTOCOL_GUIDE.md)
- **페르소나**: [personas.mdc](./personas.mdc)
- **프로젝트 분석**: [PROJECT_ANALYSIS_2025-10-13.md](../PROJECT_ANALYSIS_2025-10-13.md)

---

**기획 완료일**: 2025-10-13  
**승인**: ✅ 전원 (8/8)  
**다음 단계**: 개발 프로토콜 적용 (DEVELOPMENT_PROTOCOL.md)

