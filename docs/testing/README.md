# ğŸ§ª Testing - í…ŒìŠ¤íŠ¸ ë° í’ˆì§ˆ ë³´ì¦

AniVault í”„ë¡œì íŠ¸ì˜ í…ŒìŠ¤íŠ¸ ì „ëµ, ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬, í’ˆì§ˆ ë³´ì¦ ê´€ë ¨ ë¬¸ì„œë“¤ì…ë‹ˆë‹¤.

## ğŸ“ ë¬¸ì„œ ëª©ë¡

### ğŸ“Š ì„±ëŠ¥ ë° ë²¤ì¹˜ë§ˆí¬

#### [ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼](./performance-baseline-results.md)
- **ëª©ì **: AniVaultì˜ ì„±ëŠ¥ ê¸°ì¤€ì„  ë° ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼
- **ëŒ€ìƒ**: ì„±ëŠ¥ ì—”ì§€ë‹ˆì–´, ê°œë°œì
- **ì£¼ìš” ë‚´ìš©**:
  - íŒŒì¼ ìŠ¤ìº” ì„±ëŠ¥
  - ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ì„±ëŠ¥
  - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
  - CPU ì‚¬ìš©ë¥ 

#### [í…ŒìŠ¤íŠ¸ ìµœì í™” ìš”ì•½](./test-optimization-summary.md)
- **ëª©ì **: í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ìµœì í™” ê²°ê³¼ ë° ê°œì„  ì‚¬í•­
- **ëŒ€ìƒ**: QA ì—”ì§€ë‹ˆì–´, ê°œë°œì
- **ì£¼ìš” ë‚´ìš©**:
  - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ìµœì í™”
  - í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê°œì„ 
  - ìë™í™” í…ŒìŠ¤íŠ¸ ì „ëµ
  - CI/CD í†µí•©

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì „ëµ

### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

#### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)
- **ëª©ì **: ê°œë³„ í•¨ìˆ˜/í´ë˜ìŠ¤ì˜ ì •í™•ì„± ê²€ì¦
- **ë„êµ¬**: pytest
- **ì»¤ë²„ë¦¬ì§€**: 90% ì´ìƒ
- **ë‹´ë‹¹ì**: ìµœë¡œê±´ (QA ì „ë¬¸ê°€)

```python
# ì˜ˆì‹œ: ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
def test_matching_algorithm():
    """ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ì •í™•ì„± í…ŒìŠ¤íŠ¸."""
    candidate = MediaItem("Movie A", 2020, ["Action"])
    target = MediaItem("Movie A", 2020, ["Action"])

    score = calculate_matching_score(candidate, target)
    assert score == 1.0  # ì™„ë²½í•œ ë§¤ì¹­
```

#### 2. í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)
- **ëª©ì **: ì»´í¬ë„ŒíŠ¸ ê°„ ìƒí˜¸ì‘ìš© ê²€ì¦
- **ë„êµ¬**: pytest + requests
- **ì»¤ë²„ë¦¬ì§€**: 80% ì´ìƒ
- **ë‹´ë‹¹ì**: ìµœë¡œê±´ (QA ì „ë¬¸ê°€)

```python
# ì˜ˆì‹œ: TMDB API í†µí•© í…ŒìŠ¤íŠ¸
def test_tmdb_api_integration():
    """TMDB API í†µí•© í…ŒìŠ¤íŠ¸."""
    enricher = MetadataEnricher()
    result = enricher.enrich_metadata("Movie Title", 2020)

    assert result.title == "Movie Title"
    assert result.year == 2020
    assert result.tmdb_id is not None
```

#### 3. ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ (System Tests)
- **ëª©ì **: ì „ì²´ ì‹œìŠ¤í…œì˜ end-to-end ê²€ì¦
- **ë„êµ¬**: pytest + subprocess
- **ì»¤ë²„ë¦¬ì§€**: 70% ì´ìƒ
- **ë‹´ë‹¹ì**: ìµœë¡œê±´ (QA ì „ë¬¸ê°€)

```python
# ì˜ˆì‹œ: CLI ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
def test_full_workflow():
    """ì „ì²´ ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸."""
    result = subprocess.run([
        "anivault", "scan", "--path", "test_data/",
        "--match", "--organize"
    ], capture_output=True, text=True)

    assert result.returncode == 0
    assert "Processing completed" in result.stdout
```

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### 1. ë¶€í•˜ í…ŒìŠ¤íŠ¸ (Load Testing)
- **ëª©ì **: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì„±ëŠ¥ ê²€ì¦
- **ì‹œë‚˜ë¦¬ì˜¤**: 1000ê°œ ì´ìƒ íŒŒì¼ ì²˜ë¦¬
- **ì§€í‘œ**: ì²˜ë¦¬ ì‹œê°„, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰, CPU ì‚¬ìš©ë¥ 
- **ë‹´ë‹¹ì**: ì‚¬í†  ë¯¸ë‚˜ (ì•Œê³ ë¦¬ì¦˜ ì „ë¬¸ê°€)

#### 2. ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ (Stress Testing)
- **ëª©ì **: ì‹œìŠ¤í…œ í•œê³„ì  íŒŒì•…
- **ì‹œë‚˜ë¦¬ì˜¤**: ë©”ëª¨ë¦¬ ë¶€ì¡±, ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±
- **ì§€í‘œ**: ì‹œìŠ¤í…œ ì•ˆì •ì„±, ë³µêµ¬ ëŠ¥ë ¥
- **ë‹´ë‹¹ì**: ê¹€ì§€ìœ  (ë°ì´í„° í’ˆì§ˆ ì „ë¬¸ê°€)

#### 3. ë‚´êµ¬ì„± í…ŒìŠ¤íŠ¸ (Endurance Testing)
- **ëª©ì **: ì¥ì‹œê°„ ì‹¤í–‰ ì•ˆì •ì„± ê²€ì¦
- **ì‹œë‚˜ë¦¬ì˜¤**: 24ì‹œê°„ ì—°ì† ì‹¤í–‰
- **ì§€í‘œ**: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜, ì„±ëŠ¥ ì €í•˜
- **ë‹´ë‹¹ì**: ìœ¤ë„í˜„ (ë°±ì—”ë“œ ì „ë¬¸ê°€)

## ğŸ› ï¸ í…ŒìŠ¤íŠ¸ ë„êµ¬ ë° í™˜ê²½

### í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
```python
# pytest ì„¤ì •
[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
addopts = [
    "-v",
    "--tb=short",
    "--strict-markers",
    "--disable-warnings"
]
```

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
```python
# pytest-cov ì„¤ì •
[tool.coverage.run]
source = ["src/anivault"]
omit = [
    "*/tests/*",
    "*/test_*",
    "*/__pycache__/*"
]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "raise AssertionError",
    "raise NotImplementedError"
]
```

### ìë™í™” í…ŒìŠ¤íŠ¸
```yaml
# GitHub Actions ì›Œí¬í”Œë¡œìš°
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.8
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run tests
        run: pytest tests/ --cov=src/anivault
      - name: Upload coverage
        uses: codecov/codecov-action@v1
```

## ğŸ“Š í’ˆì§ˆ ì§€í‘œ

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
- **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: 90% ì´ìƒ
- **í†µí•© í…ŒìŠ¤íŠ¸**: 80% ì´ìƒ
- **ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸**: 70% ì´ìƒ
- **ì „ì²´ ì»¤ë²„ë¦¬ì§€**: 85% ì´ìƒ

### ì„±ëŠ¥ ì§€í‘œ
- **íŒŒì¼ ìŠ¤ìº”**: 1000ê°œ íŒŒì¼/ë¶„ ì´ìƒ
- **ë§¤ì¹­ ì •í™•ë„**: 95% ì´ìƒ
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: 500MB ì´í•˜
- **ì‹œì‘ ì‹œê°„**: 3ì´ˆ ì´ë‚´

### ì•ˆì •ì„± ì§€í‘œ
- **í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨**: 100%
- **íšŒê·€ í…ŒìŠ¤íŠ¸**: 0ê°œ ì‹¤íŒ¨
- **ì„±ëŠ¥ íšŒê·€**: 5% ì´ë‚´
- **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**: 0ê°œ

## ğŸ”„ ì§€ì†ì  ê°œì„ 

### í…ŒìŠ¤íŠ¸ ìë™í™”
- **CI/CD í†µí•©**: ëª¨ë“  PRì— ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: ì„±ëŠ¥ íšŒê·€ ìë™ ê°ì§€
- **ë³´ì•ˆ ìŠ¤ìº”**: ë³´ì•ˆ ì·¨ì•½ì  ìë™ ê²€ì‚¬
- **í’ˆì§ˆ ê²Œì´íŠ¸**: í’ˆì§ˆ ê¸°ì¤€ ë¯¸ë‹¬ ì‹œ ë°°í¬ ì°¨ë‹¨

### í…ŒìŠ¤íŠ¸ ìµœì í™”
- **ë³‘ë ¬ ì‹¤í–‰**: í…ŒìŠ¤íŠ¸ ë³‘ë ¬í™”ë¡œ ì‹¤í–‰ ì‹œê°„ ë‹¨ì¶•
- **ì„ íƒì  ì‹¤í–‰**: ë³€ê²½ëœ ì½”ë“œë§Œ í…ŒìŠ¤íŠ¸
- **ìºì‹±**: í…ŒìŠ¤íŠ¸ ë°ì´í„° ìºì‹±ìœ¼ë¡œ ì¤‘ë³µ ì‘ì—… ì œê±°
- **ëª¨í‚¹**: ì™¸ë¶€ ì˜ì¡´ì„± ëª¨í‚¹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì•ˆì •ì„± í–¥ìƒ

### í’ˆì§ˆ ë³´ì¦
- **ì½”ë“œ ë¦¬ë·°**: ëª¨ë“  ì½”ë“œ ë³€ê²½ì— ë¦¬ë·° í•„ìˆ˜
- **ì •ì  ë¶„ì„**: ì½”ë“œ í’ˆì§ˆ ìë™ ê²€ì‚¬
- **ë™ì  ë¶„ì„**: ëŸ°íƒ€ì„ ë³´ì•ˆ ê²€ì‚¬
- **ì˜ì¡´ì„± ê²€ì‚¬**: ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë³´ì•ˆ ê²€ì‚¬

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-01-XX
**ê´€ë¦¬ì**: AniVault QAíŒ€ (ìµœë¡œê±´)
